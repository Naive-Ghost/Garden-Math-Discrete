## 基本计数原理

**加法原理** 假设事件E能以m种方式出现，事件F能以n种方式出现，且两种事件不能同时出现，那么 E或F 能以m+n种方式出现。

推广到一般情况，假设事件E1 能以n1种方式出现，事件E2 能以n2种方式出现，……，且任意两个事件不能同时出现，
那么事件 E1,E2,... 之一 以 n1 + n2 + ... 种方式出现。

**乘法原理** 假设事件E能以m种方式发生，独立于事件E之外的事件F能以n种方式发生，那么 E和F的组合有以mn种方式发生。

推广到一般情况，互相独立的事件E1，E2 ... 分别有 n1，n2，...种方式发生，那么所有事件依照指定顺序 有 n1 n2 n3 ...种方式发生。

### 集合论的解释

  1. **加法原理** 若 A 与 B 不相交，则
    $$
    \textrm{card}(A \cup B) = \textrm{card}(A) + \textrm{card}(B)
    $$




## 阶乘符号

从 1 到 n（包括 1 和 n）的正整数的积记作 n! (读作n的阶乘)；即：
$$
n! = 1 * 2 * 3 * (n - 2)(n - 1) n
$$

也可以定义为：

    1. 1!= 1
    2. n! = n * (n - 1)!
    3. 0! = 1

## 二项式符号

设 r 和 n 为正整数，r <= n，符号(n,r)（读作 nCr） 定义为：

$$
\binom{n}{r} = \frac{n (n - 1) (n - 2)\cdots (n - r + 1)}{1 \cdot 2 \cdot \cdots (r - 1) \cdot r}
$$

即：

$$
\binom{n}{r}= \frac{n!}{r! (n - r)!}
$$

由于 n - (n - r) = r，因此有：

$$
\binom{n}{n - r} = \binom{n}{r}
$$

亦即，
$$
a + b = n \implies \binom{n}{a} = \binom{n}{b}
$$

### 二项式系数与Pascal三角形

$\binom{n}{r}$ 称为**二项式系数**，因为它们作为 (a + b)^n 的展开式的系数出现。特别地，可以证明：

$$
(a + b) ^n = \sum_{k = 0}^{n} \binom{n}{k} a^{n - k}b^k
$$

a + b 的相继幂的系数可以排成三角形的数表，称为Pascal三角形。Pascal形角形中的数有如下交互性质：

    1. 每一行的每一个数与最后一个数都是 1
    2. 数表中的每个其他数可通过相加位于其上方的两数得到。

**定理6.1**

$$
\binom{n+1}{r} = \binom{n}{r - 1} + \binom{n}{r}
$$

## 排列

n个对象以给定次序的任一安排称为这些对象（同时取出全部）的排列。n个对象中的任r个对象以给定序的任一安排称为 r-排列，或称为 n个对象的排列。

n个对象取r个的排列数记为：
$$
p(n, r), nPr, P_{nr}, P_r^n, (n)_r
$$

**P(n, r)公式的推导**

**定理6.2**

$$
P(n, r) = \frac{n!}{(n - r)!}
$$

**推论6.3**

n个对象（同时全取）的排列数为n!

### 可重排列

通常我们想知道可重集的排列数，可重集是指有某些元素相同的集合，用

$$
P(n; n_1, n_2,\cdots, n_r)
$$

表示n个对象的排列数。其中n_1个对象是相同的，n_2个对象是相同的，...，n_r个对象是相同的。

**定理6.4**

$$
P(n; n_1, n_2, \cdots, n_r) = \frac{n!}{n_1! n_2! \cdots n_r!}
$$

## 组合

设有含n个对象的集合，n个对象取r个对象的组合是r个对象的不计次序的任一选取。
换句话说，n个对象的任一个 r-元素子集是一个r-组合。

n个对象取r个的组合数记为C(n, r)。也可以记为：

$$
nC_r, C_{nr}, C_r^n
$$

**C(n, r)公式**

由于 n 个对象取r个的任一组合确定了该组合中的对象 r! 个排列，因此有：

$$
P(n, r) = r!C(n, r)
$$

**定理6.5**

$$
C(n, r) = \frac{P(n, r)}{r!} = \frac{n!}{r! (n - r)!}
$$

因此：
$$
C(n, r) = \binom{n}{r}
$$

## 鸽笼原理

若 n 个鸽笼被 n + 1 只或更多只鸽子占据，则至少有一个鸽笼被超过一只鸽子占据。

**推广的鸽笼原理**

若n个鸽笼被 kn + 1 只或更多只鸽子占据，k为正整数，则至少有一个鸽笼被 k+1 只或更多只鸽子占据。

## 容斥原理

设A，B为两个有限集，则

$$
\text{card}(A\cup B) = \text{card}(A) + \text{card}(B) - \text{card}(A \cap B)
$$

**定理 6.6** 对任意有限集A，B，C，有

$$
n(A\cup B \cup C) = n(A) + n(B) + n(C)
 - n(A\cap B) - n(A\cap C) - n(B\cap C)
 + n(A\cap B \cap C)
$$

**定理6.7**

假设A1, A2, ..., Am为有限集，今Sk表示给定m个集合的所有可能的 k 个交的基数

$$
\text{n}(A_{i_1} \cap A_{i_2} \cap \cdots \cap A_{i_k})
$$

的和，则

$$
n(A_1 \cup A_2 \cup \cdots \cup A_m) = s_1 - s_2 + s_3 + (-1)^{m - 1} s_m
$$

## 有序划分与无序划分

**有序划分**

**定理6.8** 设A有n个元素，n_1, n_2, ..., n_r 是正整数，它们的和为n，即 n_1 + n_2 + ... + n_r = n，
则 A 的形如[A_1, A_2, ..., A_r]的有限划分有：

$$
\frac{n!}{n_1! n_2! \cdots n_r!}
$$

个，其中 A_1 含有 n_1 个元素，A_2 含有 n_2 个元素，...,A_r 含有 n_r 个元素。

**无序划分**

在有限划分的基础上，除以组数的全排列数（即 r! ）。
